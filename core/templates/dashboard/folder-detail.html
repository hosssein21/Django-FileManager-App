{% extends "dashboard/base.html" %}
{% load static %}
{% load extras %}

{% block title %}Ø¬Ø²Ø¦ÛŒØ§Øª Ù¾ÙˆØ´Ù‡{% endblock title %}

{% block content %}
<div class="container py-5">
  <div class="mb-4 text-center">
    <h2 class="page-title">Ù¾ÙˆØ´Ù‡: {{ folder.name }}</h2>
    <p class="lead">ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ùˆ Ø²ÛŒØ±Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± "{{ folder.name }}"</p>
    {% if folder.parent %}
      <a href="{% url 'dashboard:folder-detail' folder.parent.pk %}" class="btn btn-sm btn-outline-secondary">Ø¨Ø§Ø²Ú¯Ø´Øª</a>
    {% else %}
      <a href="{% url 'dashboard:folder-list' %}" class="btn btn-sm btn-outline-secondary">Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù„ÛŒØ³Øª Ù¾ÙˆØ´Ù‡â€ŒÙ‡Ø§</a>
    {% endif %}
  </div>

  <div class="row">
    {% for subfolder in folder.subfolders.all %}
      <div class="col-6 col-md-3 mb-4">
        <div class="card text-center shadow-sm">
          <div class="card-body">
             <div class="position-absolute top-0 end-0 m-2">
            <a href="{% url 'dashboard:folder-edit' subfolder.pk %}" class="text-primary me-2" title="ÙˆÛŒØ±Ø§ÛŒØ´">
              <i class="fe fe-edit"></i>
            </a>
            <a href="{% url 'dashboard:folder-delete' subfolder.pk %}" class="text-danger" title="Ø­Ø°Ù">
              <i class="fe fe-trash-2"></i>
            </a>
          </div>
            <i class="fe fe-folder fe-32 text-warning"></i>
            <h5 class="card-title mt-2">
              <a href="{% url 'dashboard:folder-detail' subfolder.pk %}">{{ subfolder.name }}</a>
            </h5>
            <p class="text-muted small">Ø²ÛŒØ±Ù¾ÙˆØ´Ù‡</p>
          </div>
        </div>
      </div>
    {% endfor %}

    {% for file in folder.files.all %}
      <div class="col-6 col-md-3 mb-4">
        <div class="card text-center shadow-sm">
          <div class="card-body">
            <i class="fe fe-file fe-32 text-info"></i>
            <h5 class="card-title mt-2">
              <a href={{file.file.url}} target="_blank">{{ file.name }} . <small>{{ file.file|file_extension }}</small></a>
            </h5>
            <p class="text-muted small">{{ file.mime_type }}</p>
          </div>
          <div class="position-absolute top-0 end-0 m-2">
            <a href="{% url 'dashboard:file-edit' file.pk %}" class="text-primary me-2" title="ÙˆÛŒØ±Ø§ÛŒØ´">
              <i class="fe fe-edit"></i>
            </a>
            <a href="{% url 'dashboard:file-delete' file.pk %}" class="text-danger" title="Ø­Ø°Ù" onclick="return confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ');">
              <i class="fe fe-trash-2"></i>
            </a>
          </div>

        </div>
      </div>
    {% endfor %}
  </div>

  {% if not folder.subfolders.exists and not folder.files.exists %}
    <div class="alert alert-info text-center mt-4">
      Ù‡ÛŒÚ† ÙØ§ÛŒÙ„ ÛŒØ§ Ù¾ÙˆØ´Ù‡â€ŒØ§ÛŒ Ø¯Ø± Ø§ÛŒÙ† Ù…Ø³ÛŒØ± ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.
    </div>
  {% endif %}

  <a href="{% url 'dashboard:add-subfolder' folder.id %}" class="btn btn-primary">ğŸ“ Ø§ÙØ²ÙˆØ¯Ù† Ù¾ÙˆØ´Ù‡ ÙØ±Ø²Ù†Ø¯</a>
  <a href="{% url 'dashboard:add-file' folder.id %}" class="btn btn-success">ğŸ“„ Ø§ÙØ²ÙˆØ¯Ù† ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯</a>
</div>


{% endblock content %}